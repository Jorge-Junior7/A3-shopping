<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<div class="login-box">
  <h2>Cadastrar-se</h2>

  <div class="profile-section">
    <div class="profile-photo-frame" (click)="fileInput.click()">
      <img id="profilePhoto" alt="Foto de perfil" class="profile-photo" />
      <div class="placeholder">Clique para adicionar foto</div>
      <input type="file" accept="image/*" (change)="onFileSelected($event)" #fileInput style="display:none;">
    </div>
  </div>

  <form [formGroup]="registerForm" class="registerForm" (ngSubmit)="submitForm()">
    <div class="form-columns">
      <div class="column">
        <div class="form-group">
          <label for="login-email"><i class="fa fa-envelope"></i> Email:</label>
          <input required formControlName="email" id="login-email" placeholder="exemplo@gmail.com">
          <div *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched" class="error-message">
            <label *ngIf="registerForm.get('email')?.errors?.['required']">Email é obrigatório.</label>
            <label *ngIf="registerForm.get('email')?.errors?.['email']">Formato de email inválido.</label>
          </div>
        </div>

        <div class="form-group">
          <label for="login-password"><i class="fa fa-lock"></i> Senha:</label>
          <input required type="password" formControlName="password" id="login-password" placeholder="Mínimo 8 caracteres">
          <div *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched" class="error-message">
            <label *ngIf="registerForm.get('password')?.errors?.['required']">Senha é obrigatória.</label>
            <label *ngIf="registerForm.get('password')?.errors?.['pattern']">A senha deve ter pelo menos 8 caracteres, uma letra maiúscula, uma letra minúscula, um número e um caractere especial.</label>
          </div>
        </div>
      </div>
      <div class="column">
        <div class="form-group">
          <label for="full_name"><i class="fa fa-user"></i> Nome Completo:</label>
          <input required formControlName="full_name" id="full_name" placeholder="Seu Nome Completo">
          <div *ngIf="registerForm.get('full_name')?.invalid && registerForm.get('full_name')?.touched" class="error-message">
            <label *ngIf="registerForm.get('full_name')?.errors?.['required']">Nome completo é obrigatório.</label>
          </div>
        </div>

        <div class="form-group">
          <label for="birthdate"><i class="fa fa-calendar"></i> Data de Nascimento:</label>
          <input required formControlName="birthdate" id="birthdate" type="date">
          <div *ngIf="registerForm.get('birthdate')?.invalid && registerForm.get('birthdate')?.touched" class="error-message">
            <label *ngIf="registerForm.get('birthdate')?.errors?.['required']">Data de nascimento é obrigatória.</label>
          </div>
        </div>
      </div>
    </div>
    <div class="form-columns">
      <div class="column">
        <div class="form-group">
          <label for="cpf"><i class="fa fa-id-card"></i> CPF:</label>
          <input required formControlName="cpf" id="cpf" placeholder="000.000.000-00">
          <div *ngIf="registerForm.get('cpf')?.invalid && registerForm.get('cpf')?.touched" class="error-message">
            <label *ngIf="registerForm.get('cpf')?.errors?.['required']">CPF é obrigatório.</label>
            <label *ngIf="registerForm.get('cpf')?.errors?.['pattern']">CPF inválido. Formato esperado: 000.000.000-00.</label>
          </div>
        </div>
        <div class="form-group">
          <label for="nickname"><i class="fa fa-user"></i> Apelido:</label>
          <input required formControlName="nickname" id="nickname" placeholder="Seu Apelido">
          <div *ngIf="registerForm.get('nickname')?.invalid && registerForm.get('nickname')?.touched" class="error-message">
            <label *ngIf="registerForm.get('nickname')?.errors?.['required']">Apelido é obrigatório.</label>
          </div>
        </div>
      </div>
      <div class="column">
        <div class="form-group">
          <label for="location"><i class="fa fa-map-marker"></i> Localização:</label>
          <input required formControlName="location" id="location" placeholder="Sua Localização">
          <div *ngIf="registerForm.get('location')?.invalid && registerForm.get('location')?.touched" class="error-message">
            <label *ngIf="registerForm.get('location')?.errors?.['required']">Localização é obrigatória.</label>
          </div>
        </div>
      </div>
    </div>
    <div class="form-buttons">
      <button type="submit" class="submit">Cadastrar</button>
    </div>
    <div *ngIf="errorMessage" class="error-messages">{{ errorMessage }}</div>
  </form>
</div>
